<h2 mat-dialog-title>{{ dialogTitle }}</h2>
<mat-dialog-content>
  <div class="location-info">
    <!-- Library and Location context -->
    <div class="info-row">
      <span class="label">{{ libraryLabel }}</span>
      <span class="value">{{ getLibraryName() }}</span>
    </div>
    <div class="info-row">
      <span class="label">{{ collectionLabel }}</span>
      <span class="value">{{ getCollectionName() }}</span>
    </div>
    <div class="info-row">
      <span class="label">{{ callNumberLabel }}</span>
      <span class="value" dir="ltr">{{ data.rawCallNumber || data.callNumber || notAvailableMessage }}</span>
    </div>

    <!-- Loading State -->
    <ng-container *ngIf="isLoading">
      <div class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <span class="loading-text">{{ loadingMessage }}</span>
      </div>
    </ng-container>

    <!-- Content when loaded -->
    <ng-container *ngIf="!isLoading">
      <ng-container *ngIf="primaryMapping; else noMapping">
        <div class="info-row">
          <span class="label">{{ sectionLabel }}</span>
          <span class="value">{{ getSectionDescription() }}</span>
        </div>
        <div class="info-row" *ngIf="primaryMapping.floor">
          <span class="label">{{ floorLabel }}</span>
          <span class="value">{{ primaryMapping.floor }}</span>
        </div>
        <div class="info-row" *ngIf="getShelfLabel()">
          <span class="label">{{ shelfLabelLabel }}</span>
          <span class="value">{{ getShelfLabel() }}</span>
        </div>
        <div class="info-row" *ngIf="getNotes()">
          <span class="label">{{ notesLabel }}</span>
          <span class="value">{{ getNotes() }}</span>
        </div>

        <!-- SVG Shelf Map (supports multiple highlights) -->
        <tau-shelf-map-svg
          [highlightedShelfCodes]="allSvgCodes"
          [svgPath]="data.svgPath"
          [initialFloor]="primaryMapping.floor || '1'"
          [language]="currentLanguage">
        </tau-shelf-map-svg>
      </ng-container>

      <ng-template #noMapping>
        <div class="no-mapping-message" *ngIf="data.callNumber">
          <p>{{ noMappingMessage }}</p>
        </div>
      </ng-template>
    </ng-container>
  </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="dialogRef.close()">{{ closeLabel }}</button>
</mat-dialog-actions>
