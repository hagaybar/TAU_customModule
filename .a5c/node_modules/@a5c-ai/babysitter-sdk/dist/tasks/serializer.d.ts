import { JsonRecord, StoredTaskResult } from "../storage/types";
import { TaskDef, TaskSerializerContext } from "./types";
import type { SerializedEffectError } from "../runtime/types";
export declare const TASK_SCHEMA_VERSION = "2026.01.tasks-v1";
export declare const RESULT_SCHEMA_VERSION = "2026.01.results-v1";
export interface SerializeTaskDefinitionOptions extends TaskSerializerContext {
    task: TaskDef;
    inputs?: unknown;
}
export interface SerializeTaskResultOptions extends TaskSerializerContext {
    payload: TaskResultPayload;
}
export interface TaskResultPayload {
    status: "ok" | "error";
    result?: unknown;
    error?: SerializedErrorPayload;
    stdout?: string;
    stderr?: string;
    stdoutRef?: string;
    stderrRef?: string;
    startedAt?: string;
    finishedAt?: string;
    metadata?: JsonRecord;
}
export type SerializedErrorPayload = SerializedEffectError | JsonRecord | undefined;
export interface SerializeTaskDefinitionResult {
    taskRef: string;
    inputsRef?: string;
    serialized: SerializedTaskDefinition;
}
export interface SerializeTaskResultOutput {
    resultRef: string;
    stdoutRef?: string;
    stderrRef?: string;
    serialized: StoredTaskResult;
}
export interface SerializedTaskDefinition extends JsonRecord {
    schemaVersion: string;
    effectId: string;
    taskId: string;
    invocationKey: string;
    stepId?: string;
    kind: string;
    title?: string;
    description?: string;
    labels?: string[];
    inputs?: unknown;
    inputsRef?: string;
    io?: JsonRecord;
    node?: JsonRecord;
    breakpoint?: JsonRecord;
    orchestratorTask?: JsonRecord;
    sleep?: JsonRecord;
    metadata?: JsonRecord;
}
export declare function serializeAndWriteTaskDefinition(options: SerializeTaskDefinitionOptions): Promise<SerializeTaskDefinitionResult>;
export declare function serializeTaskDefinition(options: SerializeTaskDefinitionOptions): Promise<SerializedTaskDefinition>;
export declare function serializeAndWriteTaskResult(options: SerializeTaskResultOptions): Promise<SerializeTaskResultOutput>;
export declare function serializeTaskResult(options: SerializeTaskResultOptions): Promise<StoredTaskResult>;
//# sourceMappingURL=serializer.d.ts.map