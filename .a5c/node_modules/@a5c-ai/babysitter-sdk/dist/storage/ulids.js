"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.nextUlid = nextUlid;
exports.setUlidFactoryForTests = setUlidFactoryForTests;
exports.resetUlidFactory = resetUlidFactory;
const ulid_1 = require("ulid");
let activeFactory = (0, ulid_1.monotonicFactory)();
function nextUlid() {
    return activeFactory();
}
/**
 * Overrides the ULID factory so tests can run with deterministic identifiers.
 */
function setUlidFactoryForTests(factory) {
    if (typeof factory !== "function") {
        throw new Error("setUlidFactoryForTests requires a function");
    }
    activeFactory = factory;
}
/**
 * Restores the default monotonic ULID factory.
 */
function resetUlidFactory() {
    activeFactory = (0, ulid_1.monotonicFactory)();
}
